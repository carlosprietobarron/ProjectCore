{"ast":null,"code":"import axios from 'axios';\naxios.defaults.baseURL = 'http://localhost:5000/api';\naxios.interceptors.request.use(config => {\n  const user_token = window.localStorage.getItem('user_token');\n  if (user_token) {\n    config.headers.Authorization = `Bearer ${user_token}`;\n    return config;\n  }\n  return Promise.reject('No token found');\n}, error => {\n  // Manejo del error en la interceptación\n  return Promise.reject({\n    message: 'Error in request interceptor',\n    error: error\n  });\n});\n\n// También puedes agregar un interceptor de respuesta para manejar errores de token inválido\naxios.interceptors.response.use(response => {\n  return response;\n}, error => {\n  var _error$response;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n    // Token expirado o inválido\n    window.localStorage.removeItem('user_token'); // Eliminar el token\n    // Redirigir al login u otra acción\n    window.location.href = '/login';\n    return Promise.reject({\n      message: 'Invalid or expired token',\n      error: error\n    });\n  }\n  return Promise.reject(error);\n});\nconst genericRequest = {\n  get: url => axios.get(url).then(response => response),\n  post: (url, body) => axios.post(url, body).then(response => response),\n  put: (url, body) => axios.put(url, body).then(response => response),\n  delete: url => axios.delete(url).then(response => response)\n};\nexport default genericRequest;","map":{"version":3,"names":["axios","defaults","baseURL","interceptors","request","use","config","user_token","window","localStorage","getItem","headers","Authorization","Promise","reject","error","message","response","_error$response","status","removeItem","location","href","genericRequest","get","url","then","post","body","put","delete"],"sources":["/Users/carlosprieto/NET/ProjectCore/cursos-online-app/src/services/HttpClient.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'http://localhost:5000/api';\n\naxios.interceptors.request.use(\n    (config) => {\n        const user_token = window.localStorage.getItem('user_token');\n        if (user_token) {\n            config.headers.Authorization = `Bearer ${user_token}`;\n            return config;\n        }\n        return Promise.reject('No token found');\n    },\n    (error) => {\n        // Manejo del error en la interceptación\n        return Promise.reject({\n            message: 'Error in request interceptor',\n            error: error\n        });\n    }\n);\n\n// También puedes agregar un interceptor de respuesta para manejar errores de token inválido\naxios.interceptors.response.use(\n    (response) => {\n        return response;\n    },\n    (error) => {\n        if (error.response?.status === 401) {\n            // Token expirado o inválido\n            window.localStorage.removeItem('user_token'); // Eliminar el token\n            // Redirigir al login u otra acción\n            window.location.href = '/login';\n            return Promise.reject({\n                message: 'Invalid or expired token',\n                error: error\n            });\n        }\n        return Promise.reject(error);\n    }\n);\n\nconst genericRequest = {\n    get: (url) => axios.get(url).then(response => response),\n    post: (url, body) => axios.post(url, body).then(response => response),\n    put: (url, body) => axios.put(url, body).then(response => response),\n    delete: (url) => axios.delete(url).then(response => response)\n}\n\nexport default genericRequest;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzBA,KAAK,CAACC,QAAQ,CAACC,OAAO,GAAG,2BAA2B;AAEpDF,KAAK,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CACzBC,MAAM,IAAK;EACR,MAAMC,UAAU,GAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;EAC5D,IAAIH,UAAU,EAAE;IACZD,MAAM,CAACK,OAAO,CAACC,aAAa,GAAG,UAAUL,UAAU,EAAE;IACrD,OAAOD,MAAM;EACjB;EACA,OAAOO,OAAO,CAACC,MAAM,CAAC,gBAAgB,CAAC;AAC3C,CAAC,EACAC,KAAK,IAAK;EACP;EACA,OAAOF,OAAO,CAACC,MAAM,CAAC;IAClBE,OAAO,EAAE,8BAA8B;IACvCD,KAAK,EAAEA;EACX,CAAC,CAAC;AACN,CACJ,CAAC;;AAED;AACAf,KAAK,CAACG,YAAY,CAACc,QAAQ,CAACZ,GAAG,CAC1BY,QAAQ,IAAK;EACV,OAAOA,QAAQ;AACnB,CAAC,EACAF,KAAK,IAAK;EAAA,IAAAG,eAAA;EACP,IAAI,EAAAA,eAAA,GAAAH,KAAK,CAACE,QAAQ,cAAAC,eAAA,uBAAdA,eAAA,CAAgBC,MAAM,MAAK,GAAG,EAAE;IAChC;IACAX,MAAM,CAACC,YAAY,CAACW,UAAU,CAAC,YAAY,CAAC,CAAC,CAAC;IAC9C;IACAZ,MAAM,CAACa,QAAQ,CAACC,IAAI,GAAG,QAAQ;IAC/B,OAAOT,OAAO,CAACC,MAAM,CAAC;MAClBE,OAAO,EAAE,0BAA0B;MACnCD,KAAK,EAAEA;IACX,CAAC,CAAC;EACN;EACA,OAAOF,OAAO,CAACC,MAAM,CAACC,KAAK,CAAC;AAChC,CACJ,CAAC;AAED,MAAMQ,cAAc,GAAG;EACnBC,GAAG,EAAGC,GAAG,IAAKzB,KAAK,CAACwB,GAAG,CAACC,GAAG,CAAC,CAACC,IAAI,CAACT,QAAQ,IAAIA,QAAQ,CAAC;EACvDU,IAAI,EAAEA,CAACF,GAAG,EAAEG,IAAI,KAAK5B,KAAK,CAAC2B,IAAI,CAACF,GAAG,EAAEG,IAAI,CAAC,CAACF,IAAI,CAACT,QAAQ,IAAIA,QAAQ,CAAC;EACrEY,GAAG,EAAEA,CAACJ,GAAG,EAAEG,IAAI,KAAK5B,KAAK,CAAC6B,GAAG,CAACJ,GAAG,EAAEG,IAAI,CAAC,CAACF,IAAI,CAACT,QAAQ,IAAIA,QAAQ,CAAC;EACnEa,MAAM,EAAGL,GAAG,IAAKzB,KAAK,CAAC8B,MAAM,CAACL,GAAG,CAAC,CAACC,IAAI,CAACT,QAAQ,IAAIA,QAAQ;AAChE,CAAC;AAED,eAAeM,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}